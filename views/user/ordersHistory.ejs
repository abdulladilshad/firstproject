<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order History</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/ordersHistory.css">
  
</head>
<body>
    <div class="dashboard-header">
        <div class="container">
            <h1 class="dashboard-title">Order History</h1>
            <p class="text-white opacity-75 mb-0">Track and manage your orders</p>
        </div>
    </div>

    <div class="container">
        <div class="order-container">
            <% if (!orders || orders.length === 0) { %>
                <div class="empty-state">
                    <i class="fas fa-shopping-bag empty-state-icon"></i>
                    <h3>No Orders Yet</h3>
                    <p class="text-muted mb-4">Your order history will appear here</p>
                    <a href="/products" class="btn btn-primary">
                        Start Shopping
                    </a>
                </div>
            <% } else { %>
                <% orders.forEach(order => { %>
                    <div class="order-card">
                        <div class="order-header">
                            <div>
                                <div class="order-id">#<%= order.orderId.toString().slice(-8).toUpperCase() %></div>
                                <div class="order-date">
                                    <i class="far fa-calendar-alt me-2"></i>
                                    <%= new Date(order.createdAt).toLocaleDateString('en-US', {
                                        year: 'numeric',
                                        month: 'long',
                                        day: 'numeric'
                                    }) %>
                                </div>
                            </div>
                            <div>
                                <span class="status-badge status-<%= (order.status || 'pending').toLowerCase() %>">
                                    <i class="fas fa-circle" style="font-size: 8px;"></i>
                                    <%= order.status || 'Pending' %>
                                </span>
                            </div>
                        </div>

                        <div class="order-progress">
                            <div class="progress-line"></div>
                            <% const steps = ['Ordered', 'Confirmed', 'Shipped', 'Delivered']; %>
                            <% const currentStatus = order.status || 'Pending'; %>
                            <% steps.forEach((step, index) => { %>
                                <div class="progress-step <%= 
                                    currentStatus === step ? 'step-active' : 
                                    steps.indexOf(currentStatus) > index ? 'step-completed' : ''
                                %>">
                                    <div class="step-icon">
                                        <i class="fas <%= steps.indexOf(currentStatus) > index ? 'fa-check' : 'fa-circle' %>"></i>
                                    </div>
                                    <div class="step-label"><%= step %></div>
                                </div>
                            <% }); %>
                        </div>

                        <div class="order-items">
                            <div class="item-card">
                                <img src="<%= order.productImage %>" 
                                     alt="<%= order.productName %>" 
                                     class="item-image">
                                <div class="item-details">
                                    <div class="item-name"><%= order.productName %></div>
                                    <div class="text-muted">
                                        Quantity: <%= order.quantity %>
                                    </div>
                                </div>
                                <div class="item-price">
                                    ₹<%= (order.quantity * order.price).toFixed(2) %>
                                </div>
                            </div>
                        </div>

                        <div class="order-footer">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="action-buttons">
                                    <button class="btn btn-primary">
                                        <i class="fas fa-truck me-2"></i>Track Order
                                    </button>
                                    <button class="btn btn-outline">
                                        <i class="fas fa-download me-2"></i>Invoice
                                    </button>
                                </div>
                                <div class="total-amount">
                                    <div class="text-muted">Total Amount</div>
                                    <div class="h4 mb-0">₹<%= order.totalAmount.toFixed(2) %></div>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } %>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/your-font-awesome-kit.js"></script>
</body>

</html>
