<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Category</title>
    <link rel="stylesheet" href="/styles/editcategory.css"> 
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <h2>Admin Panel</h2>
            <ul class="sidebar-menu">
                <li><a href="/admin/dashboard">Dashboard</a></li>
                <li><a href="/admin/products">Products</a></li>
                <li><a href="/admin/categories" class="active">Categories</a></li>
                <li><a href="/orders">Orders</a></li>
                <li><a href="/settings">Settings</a></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
        </aside>
        <main class="main-content">
            <header class="topbar">
                <h1>Edit Category</h1>
            </header>
            <section class="form-container">
                <% if (error) { %>
                    <div class="error-message" style="color: red; margin-bottom: 15px;">
                        <%= error %>
                    </div>
                <% } %>
                <form id="categoryForm" action="/admin/categories/edit/<%= category._id %>" method="POST" onsubmit="return validateForm()">
                    <div class="form-group">
                        <label for="name">Category Name</label>
                        <input
                            type="text"
                            id="name"
                            name="name"
                            value="<%= category.name %>"
                        >
                        <small id="nameError" class="error-message" style="color: red;"></small>
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea
                            id="description"
                            name="description"
                        ><%= category.description %></textarea>
                        <small id="descriptionError" class="error-message" style="color: red;"></small>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-save" id="submitButton">Save Changes</button>
                        <a href="/admin/categories" class="btn-cancel">Cancel</a>
                    </div>
                </form>
            </section>
        </main>
    </div>

    <script>
        function validateForm() {
            let name = document.getElementById("name").value.trim();
            let description = document.getElementById("description").value.trim();
            let nameError = document.getElementById("nameError");
            let descriptionError = document.getElementById("descriptionError");

            nameError.textContent = "";
            descriptionError.textContent = "";

            let isValid = true;

            if (name === "") {
                nameError.textContent = "Category name is required.";
                isValid = false;
            } else if (!/^[A-Za-z ]{1,50}$/.test(name)) {
                nameError.textContent = "Category name must be alphabetic and up to 50 characters.";
                isValid = false;
            }

            if (description === "") {
                descriptionError.textContent = "Description is required.";
                isValid = false;
            } else if (description.length < 10 || description.length > 500) {
                descriptionError.textContent = "Description must be between 10 to 500 characters long.";
                isValid = false;
            }

            return isValid;
        }
    </script>
</body>
</html>
